import{j as e}from"./index-BtK_pdOW.js";import{b as i}from"./vendor-D6FSTBK7.js";import"./utils-B-ph8sPT.js";function v({formData:n,setFormData:o,categories:a,onSubmit:u,onCancel:m}){const[l,c]=i.useState(!1),[r,d]=i.useState(!1);i.useEffect(()=>{const s=t=>{l&&!t.target.closest(".category-select-container")&&c(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[l]);const h=async s=>{if(s.preventDefault(),!r){d(!0);try{await u(n)}catch{throw new Error("添加书签失败")}finally{d(!1)}}};return e.jsxs("form",{onSubmit:h,className:"bookmark-form",children:[e.jsx("h3",{children:"书签信息"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"名称"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>o(t=>({...t,name:s.target.value})),placeholder:"书签名称",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"分类"}),e.jsxs("div",{className:"category-select-container",children:[e.jsx("input",{type:"text",value:n.category,onChange:s=>o(t=>({...t,category:s.target.value})),onFocus:()=>c(!0),placeholder:"选择或输入新分类",required:!0}),l&&a.length>0&&e.jsx("div",{className:"category-dropdown",children:a.map((s,t)=>e.jsx("div",{className:`category-option ${n.category===s?"selected":""}`,onClick:()=>{o(p=>({...p,category:s})),c(!1)},children:s},t))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"图标"}),e.jsxs("div",{className:"icon-input-container",children:[e.jsx("input",{type:"text",value:n.icon,onChange:s=>o(t=>({...t,icon:s.target.value})),placeholder:"图标URL"}),n.icon&&e.jsx("div",{className:"icon-preview",children:e.jsx("img",{src:n.icon,alt:"网站图标",onError:s=>s.target.src="/fallback-icon.svg"})})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:m,disabled:r,children:"取消"}),e.jsx("button",{type:"submit",className:`submit-button ${r?"loading":""}`,disabled:r,children:r?"添加中...":"添加书签"})]})]})}export{v as default};
