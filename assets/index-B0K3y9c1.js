import{j as m}from"./index-_BPhmo3Y.js";import{b as i}from"./vendor-D6FSTBK7.js";import k from"./TimerHeader-D_dmsfBi.js";import S from"./ModeIndicator-C4mUv1l2.js";import b from"./TimerDisplay-DFBLaCw_.js";import x from"./TimerControls-C42SU3as.js";import j from"./SettingsPanel-DGM4s2s-.js";import y from"./TimerTips-DhBKtMoR.js";import"./utils-B-ph8sPT.js";import"./SettingsIcon-DvZrdC_w.js";function R(c){const[n,e]=i.useState(!1),[r,u]=i.useState("focus"),[a,o]=i.useState(c.focusTime*60),[s,T]=i.useState(c),[g,p]=i.useState(0),l=i.useRef(null);return i.useEffect(()=>{const t={bell:"/sounds/bell.mp3",complete:"/sounds/complete.mp3",meditation:"/sounds/meditation-bell.mp3"};return l.current=new Audio(t[s.soundOption]),()=>{l.current&&(l.current.pause(),l.current=null)}},[s.soundOption]),i.useEffect(()=>{let t=null;if(n&&a>0)t=setInterval(()=>{o(a-1)},1e3);else if(n&&a===0)if(l.current&&l.current.play(),r==="focus"){const f=g+1;p(f),f%s.longBreakInterval===0?(u("longBreak"),o(s.longBreakTime*60)):(u("break"),o(s.breakTime*60))}else u("focus"),o(s.focusTime*60);return()=>clearInterval(t)},[n,a,r,s,g]),{isRunning:n,mode:r,timeLeft:a,settings:s,cycles:g,formatTime:t=>{const f=Math.floor(t/60),d=t%60;return`${f.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},calculateProgress:()=>{const t=r==="focus"?s.focusTime*60:r==="break"?s.breakTime*60:s.longBreakTime*60;return(t-a)/t*100},toggleTimer:()=>{e(!n)},resetTimer:()=>{e(!1),o(r==="focus"?s.focusTime*60:r==="break"?s.breakTime*60:s.longBreakTime*60)},updateSettings:t=>{T(t),o(r==="focus"?t.focusTime*60:r==="break"?t.breakTime*60:t.longBreakTime*60)}}}function H(){const[c,n]=i.useState(!1),e=R({focusTime:25,breakTime:5,longBreakTime:15,longBreakInterval:4,soundOption:"bell"}),r=()=>{n(!c),e.isRunning&&e.toggleTimer()},u=a=>{e.updateSettings(a),n(!1)};return m.jsx("div",{className:"reading-timer-container",children:m.jsxs("div",{className:"timer-card",children:[m.jsx(k,{onSettingsClick:r}),m.jsx(S,{mode:e.mode,cycles:e.cycles}),m.jsx(b,{timeText:e.formatTime(e.timeLeft),progress:e.calculateProgress()}),m.jsx(x,{isRunning:e.isRunning,onToggle:e.toggleTimer,onReset:e.resetTimer}),c&&m.jsx(j,{settings:e.settings,onCancel:()=>n(!1),onApply:u}),m.jsx(y,{})]})})}export{H as default};
