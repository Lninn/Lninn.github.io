import{j as e}from"./index-CQUQLjpX.js";import{c as a}from"./vendor-SppV482W.js";import{M as h}from"./index-Veq5yH1D.js";import{f as m}from"./utils-BBaAu8xq.js";import{z as x}from"./zh-CN-CZuBSqvY.js";function v({logs:n}){const[l,i]=a.useState(null),[r,t]=a.useState(window.innerWidth<=768);a.useEffect(()=>{const s=()=>{t(window.innerWidth<=768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const d=s=>{i(s)},c=e.jsx("button",{onClick:()=>i(null),children:"关闭"});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"log-table-wrapper",children:e.jsxs("table",{className:"log-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"时间"}),e.jsx("th",{children:"环境"}),!r&&e.jsx("th",{children:"组件"}),e.jsx("th",{className:r?"mobile-error-header":"",children:"错误信息"}),!r&&e.jsx("th",{children:"URL"})]})}),e.jsx("tbody",{children:n.map(s=>e.jsxs("tr",{onClick:()=>d(s),children:[e.jsx("td",{children:e.jsx("span",{title:new Date(s.timestamp).toLocaleString(),children:m(new Date(s.timestamp),{addSuffix:!0,locale:x})})}),e.jsx("td",{children:e.jsx("span",{className:"env-badge",children:s.environment})}),!r&&e.jsx("td",{children:s.component_info}),e.jsx("td",{className:`error-cell ${r?"mobile-error-cell":""}`,children:s.error}),!r&&e.jsx("td",{className:"url-cell",children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",onClick:o=>o.stopPropagation(),children:s.url})})]},s.id))})]})}),e.jsx(h,{isOpen:!!l,onClose:()=>i(null),title:"错误日志详情",size:"md",footer:c,children:l&&e.jsxs("div",{className:"log-details",children:[e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"基本信息"}),e.jsxs("div",{className:"log-details-row",children:[e.jsx("span",{className:"log-details-label",children:"时间："}),e.jsx("span",{className:"log-details-value",children:new Date(l.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"log-details-row",children:[e.jsx("span",{className:"log-details-label",children:"环境："}),e.jsx("span",{className:"log-details-value",children:l.environment})]}),e.jsxs("div",{className:"log-details-row",children:[e.jsx("span",{className:"log-details-label",children:"组件："}),e.jsx("span",{className:"log-details-value",children:l.component_info})]})]}),e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"错误信息"}),e.jsx("div",{className:"log-details-error",children:l.error})]}),e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"URL"}),e.jsx("div",{className:"log-details-url",children:e.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:l.url})})]}),e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"用户代理"}),e.jsx("div",{className:"log-details-user-agent",children:l.user_agent})]})]})})]})}export{v as LogTable};
