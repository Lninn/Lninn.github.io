import{j as e}from"./index-D31FZz7c.js";import{b as r}from"./vendor-D6FSTBK7.js";import"./utils-B-ph8sPT.js";function C(){const[a,d]=r.useState(!1),[t,u]=r.useState("focus"),[o,i]=r.useState(25*60),[s,j]=r.useState({focusTime:25,breakTime:5,longBreakTime:15,longBreakInterval:4,soundOption:"bell"}),[p,h]=r.useState(!1),[g,f]=r.useState(0),l=r.useRef(null);r.useEffect(()=>(l.current=new Audio("/sounds/bell.mp3"),()=>{l.current&&(l.current.pause(),l.current=null)}),[]),r.useEffect(()=>{const n={bell:"/sounds/bell.mp3",complete:"/sounds/complete.mp3",meditation:"/sounds/meditation-bell.mp3"};return l.current=new Audio(n[s.soundOption]),()=>{l.current&&(l.current.pause(),l.current=null)}},[s.soundOption]),r.useEffect(()=>{let n=null;if(a&&o>0)n=setInterval(()=>{i(o-1)},1e3);else if(a&&o===0)if(l.current&&l.current.play(),t==="focus"){const c=g+1;f(c),c%s.longBreakInterval===0?(u("longBreak"),i(s.longBreakTime*60)):(u("break"),i(s.breakTime*60))}else u("focus"),i(s.focusTime*60);return()=>clearInterval(n)},[a,o,t,s,g]);const k=n=>{const c=Math.floor(n/60),x=n%60;return`${c.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`},b=()=>{const n=t==="focus"?s.focusTime*60:t==="break"?s.breakTime*60:s.longBreakTime*60;return(n-o)/n*100},v=()=>{d(!a)},T=()=>{d(!1),i(t==="focus"?s.focusTime*60:t==="break"?s.breakTime*60:s.longBreakTime*60)},w=()=>{h(!p),a&&d(!1)},m=n=>{const{name:c,value:x}=n.target;j({...s,[c]:parseInt(x,10)})},y=()=>{i(t==="focus"?s.focusTime*60:t==="break"?s.breakTime*60:s.longBreakTime*60),h(!1)};return e.jsx("div",{className:"reading-timer-container",children:e.jsxs("div",{className:"timer-card",children:[e.jsxs("div",{className:"timer-header",children:[e.jsx("h2",{children:"专注阅读计时器"}),e.jsx("button",{className:"settings-button",onClick:w,"aria-label":"设置",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]}),e.jsxs("div",{className:"mode-indicator",children:[e.jsx("span",{className:`mode-badge ${t}`,children:t==="focus"?"专注阅读":t==="break"?"短休息":"长休息"}),e.jsxs("span",{className:"cycles-count",children:["第 ",g+1," 个周期"]})]}),e.jsxs("div",{className:"timer-display",children:[e.jsx("div",{className:"time-text",children:k(o)}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${b()}%`}})})]}),e.jsxs("div",{className:"timer-controls",children:[e.jsx("button",{className:"control-button reset",onClick:T,"aria-label":"重置",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block",margin:"auto"},children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("polyline",{points:"1 20 1 14 7 14"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),e.jsx("button",{className:`control-button ${a?"pause":"play"}`,onClick:v,"aria-label":a?"暂停":"开始",children:a?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block",margin:"auto"},children:[e.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block",margin:"auto"},children:e.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})})]}),p&&e.jsxs("div",{className:"settings-panel",children:[e.jsx("h3",{children:"计时器设置"}),e.jsxs("div",{className:"settings-form",children:[e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{htmlFor:"focusTime",children:"专注时间 (分钟)"}),e.jsx("input",{type:"number",id:"focusTime",name:"focusTime",min:"1",max:"60",value:s.focusTime,onChange:m})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{htmlFor:"breakTime",children:"短休息时间 (分钟)"}),e.jsx("input",{type:"number",id:"breakTime",name:"breakTime",min:"1",max:"30",value:s.breakTime,onChange:m})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{htmlFor:"longBreakTime",children:"长休息时间 (分钟)"}),e.jsx("input",{type:"number",id:"longBreakTime",name:"longBreakTime",min:"5",max:"60",value:s.longBreakTime,onChange:m})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{htmlFor:"longBreakInterval",children:"长休息间隔 (周期数)"}),e.jsx("input",{type:"number",id:"longBreakInterval",name:"longBreakInterval",min:"1",max:"10",value:s.longBreakInterval,onChange:m})]}),e.jsxs("div",{className:"settings-actions",children:[e.jsx("button",{className:"cancel-button",onClick:()=>h(!1),children:"取消"}),e.jsx("button",{className:"apply-button",onClick:y,children:"应用"})]})]})]}),e.jsxs("div",{className:"timer-tips",children:[e.jsx("h4",{children:"阅读小贴士"}),e.jsxs("ul",{children:[e.jsx("li",{children:"专注阅读期间避免分心"}),e.jsx("li",{children:"休息时远眺窗外，让眼睛放松"}),e.jsx("li",{children:"每完成4个周期，给自己一个长休息奖励"}),e.jsx("li",{children:"休息时做些简单的伸展运动"})]})]})]})})}export{C as default};
