import{j as e}from"./index-D40SI4zL.js";import{b as i}from"./vendor-D6FSTBK7.js";import{M as h}from"./index-B3ctVsdj.js";import{J as m}from"./index-Tc3klTjA.js";import{f as x}from"./utils-B-ph8sPT.js";import{z as j}from"./zh-CN-BsVeUFFo.js";function w({logs:n}){const[l,a]=i.useState(null),[r,t]=i.useState(window.innerWidth<=768);i.useEffect(()=>{const s=()=>{t(window.innerWidth<=768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const d=s=>{a(s)},o=e.jsx("button",{onClick:()=>a(null),children:"关闭"});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"log-table-wrapper",children:e.jsxs("table",{className:"log-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"时间"}),e.jsx("th",{children:"环境"}),!r&&e.jsx("th",{children:"组件"}),e.jsx("th",{className:r?"mobile-error-header":"",children:"错误信息"}),!r&&e.jsx("th",{children:"URL"})]})}),e.jsx("tbody",{children:n.map(s=>e.jsxs("tr",{onClick:()=>d(s),children:[e.jsx("td",{children:e.jsx("span",{title:new Date(s.timestamp).toLocaleString(),children:x(new Date(s.timestamp),{addSuffix:!0,locale:j})})}),e.jsx("td",{children:e.jsx("span",{className:"env-badge",children:s.environment})}),!r&&e.jsx("td",{children:s.component_info}),e.jsx("td",{className:`error-cell ${r?"mobile-error-cell":""}`,children:s.error}),!r&&e.jsx("td",{className:"url-cell",children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",onClick:c=>c.stopPropagation(),children:s.url})})]},s.id))})]})}),e.jsx(h,{isOpen:!!l,onClose:()=>a(null),title:"错误日志详情",size:"lg",footer:o,children:l&&e.jsxs("div",{className:"log-details",children:[e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"基本信息"}),e.jsxs("div",{className:"log-details-row",children:[e.jsx("span",{className:"log-details-label",children:"时间："}),e.jsx("span",{className:"log-details-value",children:new Date(l.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"log-details-row",children:[e.jsx("span",{className:"log-details-label",children:"环境："}),e.jsx("span",{className:"log-details-value",children:l.environment})]}),e.jsxs("div",{className:"log-details-row",children:[e.jsx("span",{className:"log-details-label",children:"组件："}),e.jsx("span",{className:"log-details-value",children:l.component_info})]})]}),e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"错误信息"}),e.jsx(m,{data:l.error,maxHeight:400})]}),e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"URL"}),e.jsx("div",{className:"log-details-url",children:e.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:l.url})})]}),e.jsxs("div",{className:"log-details-section",children:[e.jsx("h4",{children:"用户代理"}),e.jsx("div",{className:"log-details-user-agent",children:l.user_agent})]})]})})]})}export{w as LogTable};
