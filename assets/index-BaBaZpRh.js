import{j as t}from"./index-D4WhHd2X.js";import{b as r,h as p}from"./vendor-C_ovgAfI.js";function w({isOpen:e,onClose:l,title:c,children:h,size:y="md",closeOnEsc:i=!0,closeOnOverlayClick:E=!0,showCloseButton:u=!0,position:v="center",footer:m,className:j=""}){const[N,f]=r.useState(!1),o=r.useRef(null),s=r.useRef(null);r.useEffect(()=>(e?(f(!0),s.current=document.activeElement,document.body.style.overflow="hidden"):(document.body.style.overflow="",s.current&&s.current.focus()),()=>{document.body.style.overflow=""}),[e]),r.useEffect(()=>{const a=n=>{if(e&&(n.key==="Escape"&&i&&l(),n.key==="Tab"&&o.current)){const d=o.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(d.length===0)return;const b=d[0],x=d[d.length-1];n.shiftKey&&document.activeElement===b?(x.focus(),n.preventDefault()):!n.shiftKey&&document.activeElement===x&&(b.focus(),n.preventDefault())}};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[e,i,l]),r.useEffect(()=>{if(e&&o.current){const a=o.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');a?a.focus():o.current.focus()}},[e]);const k=()=>{e||f(!1)};return!e&&!N?null:p.createPortal(t.jsxs("div",{className:`modal-container ${e?"modal-open":"modal-close"}`,onAnimationEnd:k,"aria-hidden":!e,children:[t.jsx("div",{className:"modal-overlay",onClick:E?l:void 0,"aria-hidden":"true"}),t.jsxs("div",{ref:o,className:`modal-content modal-${y} modal-position-${v} ${j}`,role:"dialog","aria-modal":"true","aria-labelledby":c?"modal-title":void 0,tabIndex:-1,onClick:a=>a.stopPropagation(),children:[(c||u)&&t.jsxs("div",{className:"modal-header",children:[c&&t.jsx("h3",{id:"modal-title",className:"modal-title",children:c}),u&&t.jsx("button",{className:"modal-close-button",onClick:l,"aria-label":"关闭",children:"×"})]}),t.jsx("div",{className:"modal-body",children:h}),m&&t.jsx("div",{className:"modal-footer",children:m})]})]}),document.body)}export{w as M};
